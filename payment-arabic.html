<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mustafa Monem</title>
    <link rel="stylesheet" href="./css/style1.css" />
    <link rel="stylesheet" href="./css/all.min.css" />
    <link
      rel="shortcut icon"
      type="image/Logo"
      href="./css/MUSTAFA MEN3EM logo 2 1.png"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@200..1000&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lexend"
      rel="stylesheet"
    />
  </head>

  <body dir="rtl">
    <header>
      <div class="container">
        <div class="Logo">
          <img src="./css/MUSTAFA MEN3EM logo 2 1.png" alt="" />
        </div>
        <ul>
          <a href="arabic.html" class="home">
            <li>الرئيسية</li>
          </a>
          <a href="arabic.html#about">
            <li>حول</li>
          </a>
          <a href="arabic.html#Services">
            <li>الخدمات</li>
          </a>
          <a href="arabic.html#Contact">
            <li>تواصل معنا</li>
          </a>
        </ul>
        <ul class="dropdown-1">
          <li>
            <a href="#" id="dropdownNav"><i class="fa-solid fa-bars"></i></a>
            <ul class="dropdown">
              <a href="arabic.html">
                <li>الرئيسية</li>
              </a>
              <a href="arabic.html#about">
                <li>حول</li>
              </a>
              <a href="arabic.html#Services">
                <li>الخدمات</li>
              </a>
              <a href="arabic.html#Contact">
                <li>تواصل معنا</li>
              </a>
            </ul>
          </li>
        </ul>

        <span class="span">
          <a href="#"> انضم الان</a>
          <a href="payment.html" style="color: #17e610">English</a>
        </span>
      </div>
    </header>
    <main>
      <div class="container payment-container">
        <div class="payment-inputs">
          <form>
            <div class="payment-inp">
              <label>اسمك</label>
              <input
                type="text"
                placeholder="ادخل اسمك الاول"
                class="firstName-inp"
                required
              />
              <input
                type="text"
                placeholder="ادخل اسمك الاخير"
                class="lastName-inp"
                required
              />
            </div>
            <div class="payment-inp">
              <label>رقم الهاتف</label>
              <div class="inp-group">
                <select>
                  <option value="مصر">مصر</option>
                  <option value="مصر">السعودية</option>
                  <option value="مصر">الامارات</option>
                  <option value="مصر">الكويت</option>
                </select>
                <input
                  type="text"
                  placeholder="ادخل رقم الهاتف"
                  class="phone-inp"
                  required
                />
              </div>
            </div>
            <div class="payment-inp">
              <label>بريدك الالكتروني</label>
              <input
                type="text"
                placeholder="ادخل  بريدك الالكتروني"
                class="email-inp"
                required
              />
            </div>
            <button type="submit" style="width: 100%">اشترك الان</button>
          </form>
        </div>
        <div class="payment-details" style="color: #fff">
          <h1>تفاصيل <span>الباقة</span></h1>
          <div class="box">
            <div class="box-head">
              <p>3 شهور</p>
              <p>999 جنيه</p>
            </div>
            <p class="plan-description">
              Lorem, ipsum dolor sit amet consectetur adipisicing elit.
              Corporis, eos eaque? Vel quia rem veniam cumque voluptas porro
              dolores? Beatae laboriosam ipsa aut cumque expedita, reprehenderit
              accusamus. Aut, itaque quaerat.
            </p>
          </div>
          <div class="proses">
            <div class="pros">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                id="check"
              >
                <path
                  fill="#e6b710"
                  d="M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z"
                ></path>
              </svg>
              <p class="pros-1">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore
                dignissimos aliquid nemo omnis sint odit!
              </p>
            </div>
            <div class="pros">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                id="check"
              >
                <path
                  fill="#e6b710"
                  d="M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z"
                ></path>
              </svg>
              <p class="pros-2">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore
                dignissimos aliquid nemo omnis sint odit!
              </p>
            </div>
            <div class="pros">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                id="check"
              >
                <path
                  fill="#e6b710"
                  d="M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z"
                ></path>
              </svg>
              <p class="pros-3">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore
                dignissimos aliquid nemo omnis sint odit!
              </p>
            </div>
          </div>
          <hr />
          <div class="total">
            <span>الاجمالي</span>
            <span>999</span>
          </div>
        </div>
      </div>
    </main>
    <footer id="Contact">
      <div class="container">
        <div class="footer">
          <div class="footer-sec1">
            <!-- <div class="Logo-2">
                        <img src="./css/MUSTAFA MEN3EM logo 2 1.png" alt="">
                    </div> -->
            <p><span>Mustafa</span>Abdelmonem</p>
            <ul>
              <a href="arabic.html#">
                <li>الرئيسية</li>
              </a>
              <a href="arabic.html#about">
                <li>حول</li>
              </a>
              <a href="arabic.html#Services">
                <li>الخدمات</li>
              </a>
              <a href="#">
                <li>المنتجات</li>
              </a>
              <a href="arabic.html#Contact">
                <li>تواصل معنا</li>
              </a>
            </ul>
          </div>
          <div class="footer-sec2">
            <p>Utlity Pages</p>
            <ul>
              <a href="arabic.html#">
                <li>الرئيسية</li>
              </a>
              <a href="arabic.html#about">
                <li>حول</li>
              </a>
              <a href="arabic.html#Services">
                <li>الخدمات</li>
              </a>
              <a href="#">
                <li>المنتجات</li>
              </a>
              <a href="arabic.html#Contact">
                <li>تواصل معنا</li>
              </a>
            </ul>
          </div>
          <div class="newsletter">
            <h2>النشرة الإخبارية</h2>
            <input type="email" placeholder="ضع ايميلك هنا" />
            <a href="#">اشترك</a>
            <div class="social-icons">
              <a href="https://www.instagram.com/mustafamonem1/" target="_blank"><i
                class="fa-brands fa-instagram"></i></a>
        <a href="https://www.facebook.com/big.mstafa/" target="_blank"><i
                class="fa-brands fa-facebook"></i></a>
        <a href="https://wa.me/message/N6M3BFV7IK6LN1" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
        <a href="https://www.tiktok.com/@mustafa.abdelmen3m?_t=8lZF1ZckSkX&_r=1" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
            </div>
          </div>
        </div>
      </div>
      <span>
        <p>
          All Rights Reserved
          <img src="./css/MUSTAFA MEN3EM logo 2 1.png" alt="Logo" /> Mustafa
          <span class="footer-span">Abdolmonem</span>
        </p>
      </span>
    </footer>
    <script src="/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="/swiper.js"></script>
    <script
      language="JavaScript"
      src="http://www.geoplugin.net/javascript.gp"
      type="text/javascript"
    ></script>
    <script>
      let finalPrice = document.querySelector(".total span:nth-child(2)");
      let firstNameInp = document.querySelector(".firstName-inp");
      let lastNameInp = document.querySelector(".lastName-inp");
      let phoneInp = document.querySelector(".phone-inp");
      let emailInp = document.querySelector(".email-inp");
      let boxHeadPlan = document.querySelector(".box-head p:nth-child(1)");
      let boxHeadPrice = document.querySelector(".box-head p:nth-child(2)");
      let planDescription = document.querySelector(".plan-description");
      let planProsOne = document.querySelector(".pros-1");
      let planProsTwo = document.querySelector(".pros-2");
      let planProsThree = document.querySelector(".pros-3");

      let storagePrice = JSON.parse(localStorage.getItem("plan")).price;
      console.log(storagePrice);
      if (storagePrice == "4000 جنيه") {
        boxHeadPlan.textContent = "3 شهور";
        planDescription.textContent =
          "باقة VIP Diamond هي باقة ممتازة وحصرية مخصصة للعملاء المميزين فقط. إنها توفر تجربة قوية وفريدة من نوعها، وتتميز بالتواصل الشخصي المباشر عبر المكالمات الهاتفية ومكالمات الفيديو معي شخصيًا.";
        planProsOne.textContent = "لقائين على زوم شهرياً";
        planProsTwo.textContent =
          "متابعة يومية مني سواء من خلال الاتصال الهاتفي برقمك أو من خلال إرسال رسائل يومية على الواتساب لتقديم المساعدة والتحفيز طوال الوقت";
        planProsThree.textContent =
          "يمكنك الوصول إلى رقم هاتفي الشخصي لإجراء المكالمات الهاتفية في أي وقت من اليوم.";
      } else if (storagePrice == "7000 جنيه") {
        boxHeadPlan.textContent = "5 شهور + 1 شهر مجانا";
        planDescription.textContent =
          "باقة VIP Diamond هي باقة ممتازة وحصرية مخصصة للعملاء المميزين فقط. إنها توفر تجربة قوية وفريدة من نوعها، وتتميز بالتواصل الشخصي المباشر عبر المكالمات الهاتفية ومكالمات الفيديو معي شخصيًا.";
        planProsOne.textContent = "لقائين على زوم شهرياً";
        planProsTwo.textContent =
          "متابعة يومية مني سواء من خلال الاتصال الهاتفي برقمك أو من خلال إرسال رسائل يومية على الواتساب لتقديم المساعدة والتحفيز طوال الوقت";
        planProsThree.textContent =
          "يمكنك الوصول إلى رقم هاتفي الشخصي لإجراء المكالمات الهاتفية في أي وقت من اليوم.";
      } else if (storagePrice == "1699 جنيه") {
        boxHeadPlan.textContent = "3 شهور";
        planDescription.textContent =
          "مع الباقة الذهبية ستتمتع بتجربة فريدة وشخصية تضمن حل المشاكل التي تواجهك والإجابة على أسئلتك بسرعة وفعالية";
        planProsOne.textContent =
          "خطة نظام غذائي مخصصة بناءً على الأطعمة المفضلة لديك (يتم تغييرها كل 10 أيام)";
        planProsTwo.textContent = "خدمة طبية كاملة في حالة الإصابة";
        planProsThree.textContent =
          "كتاب وصفات صحية يحتوي على أكثر من 55 وصفة مغذية تساعدك على الوصول إلى أهدافك";
      } else if (storagePrice == "3000 جنيه") {
        boxHeadPlan.textContent = "5 شهور + 1 شهر مجانا";
        planDescription.textContent =
          "مع الباقة الذهبية ستتمتع بتجربة فريدة وشخصية تضمن حل المشاكل التي تواجهك والإجابة على أسئلتك بسرعة وفعالية";
        planProsOne.textContent =
          "خطة نظام غذائي مخصصة بناءً على الأطعمة المفضلة لديك (يتم تغييرها كل 10 أيام)";
        planProsTwo.textContent = "خدمة طبية كاملة في حالة الإصابة";
        planProsThree.textContent =
          "كتاب وصفات صحية يحتوي على أكثر من 55 وصفة مغذية تساعدك على الوصول إلى أهدافك";
      } else if (storagePrice == "999 جنيه") {
        planDescription.textContent =
          "هي باقة مخصصة للعملاء ذوي الخبرة الذين يحتاجون إلى خطط مستقلة بدون متابعة مني";
        planProsOne.textContent = "تسجيلات الوصول الشهرية عبر Gmail.";
        planProsTwo.textContent = "روتين القلب للحصول على نتائج سريعة";
        planProsThree.textContent = "تكملة التوصيات";
      }

      if (geoplugin_countryName() !== "Egypt") {
        let currencyCountry = geoplugin_countryName();
        let currencyCode = geoplugin_currencyCode();
        console.log(currencyCountry);
        console.log(currencyCode);
        const baseURL = `https://open.er-api.com/v6/latest/${currencyCode}`;
        fetch(baseURL)
          .then((response) => response.json())
          .then((data) => {
            console.log(data.rates.EGP);
            if (localStorage.getItem("plan")) {
              boxHeadPrice.textContent = Math.floor(
                JSON.parse(localStorage.getItem("plan")).price * data.rates.EGP
              );
              finalPrice.textContent = Math.floor(
                JSON.parse(localStorage.getItem("plan")).price * data.rates.EGP
              );
            }
          })
          .catch((error) => {
            console.error("Error fetching data:", error);
          });
      } else if (geoplugin_countryName() == "Egypt") {
        if (localStorage.getItem("plan")) {
          finalPrice.textContent = JSON.parse(
            localStorage.getItem("plan")
          ).price;
          boxHeadPrice.textContent = JSON.parse(
            localStorage.getItem("plan")
          ).price;
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");

        form.addEventListener("submit", function (event) {
          event.preventDefault();

          const firstName = document.querySelector(".firstName-inp").value;
          const lastName = document.querySelector(".lastName-inp").value;
          const phone = document.querySelector(".phone-inp").value;
          const email = document.querySelector(".email-inp").value;

          let amount = parseFloat(
            document.querySelector(".total span:nth-child(2)").textContent
          );

          // تحويل القيمة من الدولار إلى الجنيه المصري
          if (geoplugin_countryName() !== "Egypt") {
            const currencyCode = geoplugin_currencyCode();
            const baseURL = `https://open.er-api.com/v6/latest/${currencyCode}`;

            fetch(baseURL)
              .then((response) => response.json())
              .then((data) => {
                amount *= data.rates.EGP;
                initiatePayment(firstName, lastName, phone, email, amount);
              })
              .catch((error) => {
                console.error("Error fetching data:", error);
              });
          } else {
            initiatePayment(firstName, lastName, phone, email, amount);
          }
        });

        function initiatePayment(firstName, lastName, phone, email, amount) {
          const url =
            "https://mustafaabdelmonem.com/api/payment/initiatePayment";
          const data = {
            amount: amount * 100,
            currency: "EGP",
            first_name: firstName,
            last_name: lastName,
            phone: phone,
            email: email,
          };

          fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          })
            .then((response) => response.json())
            .then((data) => {
              console.log(data);

              // افتح الرابط في تاب جديدة إذا كان متوفرًا
              if (data.paymentLink) {
                window.open(data.paymentLink, "_blank");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
            });
          console.log(amount);
        }
      });
    </script>
  </body>
</html>
